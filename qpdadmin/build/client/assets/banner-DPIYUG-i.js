import{r as B,w as Q,p as E}from"./chunk-JZWAC4HX-RAvRF26o.js";import{c as o,a as v,u as F,j as t,f as M,b as u,p as V}from"./index-DlNrAyH6.js";import{t as a,u as D}from"./QueryClientProvider-CuEB3_5v.js";import{i as _,c as C,T as K,e as O,h as T,f as q,d as R,g as $,Q as w,a as Y,b as G,j as z,A as N,u as U,H as X}from"./Header-Bfq-Jpf2.js";import{I as A}from"./index-BKE5uI4f.js";import"./supabase-C7_hgrEP.js";import"./index-BJMzvWEF.js";var i;(e=>{e.wrap=o({display:"flex",flexDirection:"column",width:"894px"}),e.header=o({display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px"}),e.headerLeftWrap=o({display:"flex",gap:12,alignItems:"center"}),e.headerLeftText=o({...a.fontStyles["Caption/Caption1_13∙100_SemiBold"],color:a.color.grayScale.gray80}),e.addText=o({...a.fontStyles["Caption/Caption1_13∙100_SemiBold"],color:a.color.main}),e.container=o({width:"100%",overflowX:"auto",backgroundColor:"#fff",marginTop:"24px"}),e.table=o({width:"100%",borderCollapse:"collapse",fontSize:"14px"}),e.tableHead=o({backgroundColor:a.color.grayScale.gray40,color:a.color.grayScale.gray80,fontSize:"13px",fontWeight:600,lineHeight:"100%"}),e.tableBody=o({backgroundColor:"#fff"}),e.tableRow=o({borderBottom:"1px solid #e9ecef",transition:"background-color 0.2s",":hover":{backgroundColor:a.color.secondary},"&:last-child":{borderBottom:"none"}}),e.tableHeader=o({padding:"12px",textAlign:"left",fontWeight:600,whiteSpace:"nowrap"}),e.tableCell=o({padding:"12px 8px",color:"#212529",verticalAlign:"middle"}),e.statusCell=g=>o({display:"inline-block",padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:500,backgroundColor:g==="active"?"#d4edda":"#f8d7da",color:g==="active"?"#155724":"#721c24"}),e.dateCell=o({...a.fontStyles["Body/lines/Body3_14∙150_Regular_lines"]}),e.textCell=o({...a.fontStyles["Body/lines/Body3_14∙150_Regular_lines"]}),e.imagePreview=o({width:"223px",height:"75px",borderRadius:"14px",objectFit:"cover"}),e.linkText=o({color:a.color.main,cursor:"pointer",textDecoration:"underline"})})(i||(i={}));const J=()=>_({mutationFn:e=>v.Banner.editHide(e)}),L=()=>_({mutationFn:e=>v.Banner.del(e)}),S=({bannerList:e=[],onClickOpenEditSidebar:g=()=>{}})=>{const s=F(),c=$(),d=C("save-alert"),h=C("admin-save-error"),b=B.useMemo(()=>e,[e]),y=D(),{mutateAsync:m}=J(),{mutateAsync:p}=L(),H=async n=>{try{await m(n),y.invalidateQueries({queryKey:[w.banner.list]}),d.open()}catch{h.open()}},P=async n=>{try{await p(n),y.invalidateQueries({queryKey:[w.banner.list]}),d.open()}catch{h.open()}},k=n=>{if(n.includes("questionperday.me")){window.open(`https://questionperday.me/${n}`,"_blank");return}window.open(n,"_blank")},W=[c.accessor("imageId",{id:"imageId",header:"배너 이미지",cell:n=>t("img",{css:i.imagePreview,src:M.image.host+n.getValue()}),size:423}),c.accessor("title",{id:"title",header:"배너 이름",cell:n=>t("div",{css:i.textCell,children:n==null?void 0:n.getValue()}),size:166}),c.accessor("href",{header:"베너 링크",cell:n=>t("div",{css:i.textCell,children:t("p",{css:i.linkText,onClick:()=>k(n.getValue()),children:n.getValue()})}),size:160}),c.accessor("isHide",{header:"노출 여부",cell:n=>t("div",{css:i.textCell,children:t(K,{isOn:!!n.getValue(),onClickToggle:()=>H(n.row.original.id)})}),size:65}),c.accessor("id",{header:"삭제",cell:n=>t("div",{css:i.textCell,children:t("p",{css:[i.linkText,{color:s.color.red.secondary,textAlign:"center"}],onClick:r=>{r.stopPropagation(),P(n.getValue())},children:"삭제"})}),size:80})],I=O({data:b,columns:W,getCoreRowModel:T()});return u("section",{css:i.wrap,children:[t("div",{css:i.container,children:u("table",{css:i.table,children:[t("thead",{css:i.tableHead,children:I.getHeaderGroups().map(n=>t("tr",{css:i.tableRow,children:n.headers.map(r=>t("th",{css:i.tableHeader,style:{width:r.getSize()},children:r.isPlaceholder?null:q(r.column.columnDef.header,r.getContext())},r.id))},n.id))}),t("tbody",{css:i.tableBody,children:I.getRowModel().rows.map((n,r)=>t("tr",{css:i.tableRow,onClick:f=>{g(n.original)},children:n.getVisibleCells().map(f=>t("td",{css:i.tableCell,style:{width:f.column.getSize()},children:q(f.column.columnDef.cell,f.getContext())},f.id))},n.id))})]})}),t(d.Render,{children:t(R,{modal:d,text:"처리가 완료되었습니다."})}),t(h.Render,{children:t(R,{modal:h,text:"수정 중 문제가 발생했습니다."})})]})};var x;(e=>{e.wrap=o({}),e.header=o({display:"flex",width:"894px",justifyContent:"space-between",alignItems:"center",marginTop:"20px"}),e.headerLeftWrap=o({display:"flex",gap:12,alignItems:"center"}),e.headerLeftText=o({...a.fontStyles["Caption/Caption1_13∙100_SemiBold"],color:a.color.grayScale.gray80}),e.addText=o({...a.fontStyles["Caption/Caption1_13∙100_SemiBold"],color:a.color.main}),e.tableWrap=o({width:"894px",display:"flex",flexDirection:"column",padding:"0 40px"})})(x||(x={}));const Z=({page:e})=>Y({queryKey:[w.banner.list],queryFn:()=>v.Banner.getList({page:e,limit:99})});var l;(e=>{e.wrap=o({width:"528px",height:"100%",display:"flex",flexDirection:"column",padding:"0 18px 40px 18px",backgroundColor:"#fff",borderRadius:"20px 0px 0px 0px",marginTop:"20px",boxShadow:"-4px 0px 20px 0px rgba(25, 25, 25, 0.10)"}),e.header=o({display:"flex",alignItems:"center",gap:"12px",padding:"16px 0",height:"56px"}),e.body=o({display:"flex",flex:1,flexDirection:"column",gap:"24px",padding:"0"}),e.row=o({display:"flex",flexDirection:"column",gap:"4px",width:"100%"}),e.inputWrap=o({position:"relative"}),e.showWrap=o({top:"16px",right:"12px",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}),e.input=o({width:"100%",padding:"16px 12px",height:"50px",borderRadius:"10px",border:`1px solid ${a.color.grayScale.gray40}`}),e.button=o({width:"100%",height:"50px",borderRadius:"14px",padding:"12px 16px",justifyContent:"center",alignItems:"center",...a.fontStyles["Body/Body2_15∙100_Bold"],color:"#fff",background:a.color.main,":disabled":{background:a.color.grayScale.gray50}}),e.addImageButton=o({display:"flex",justifyContent:"center",alignItems:"center",gap:"4px",border:`1px dashed ${a.color.main}`,borderRadius:"10px",height:"38px"}),e.caption14=o({...a.fontStyles["Caption/Caption1_13∙100_SemiBold"],color:a.color.main}),e.imageButtonWrap=o({width:"100%"})})(l||(l={}));const ee=()=>_({mutationFn:e=>v.Banner.add(e)}),te=()=>_({mutationFn:e=>v.Banner.edit(e)}),j=({onClickClose:e,banner:g})=>{const s=C("admin-save"),c=C("admin-save-error"),d=D(),{mutateAsync:h}=ee(),{mutateAsync:b}=te(),{uploadImage:y,imageIdList:m}=G(),[p,H]=B.useState({title:"",href:"",imageId:m[0]||"",...g}),P=[p.title,p.href,m.length].every(Boolean),k=r=>{H(V(f=>{f[r.target.name]=r.target.value}))},W=async()=>{try{await h({...p,imageId:m[0]}),d.invalidateQueries({queryKey:[w.banner.list]}),s.open()}catch{c.open()}},I=async()=>{try{await b({...p,imageId:m[0],id:p.id}),d.invalidateQueries({queryKey:[w.banner.list]}),s.open()}catch{c.open()}},n=p.id?I:W;return u("section",{css:l.wrap,children:[t("header",{css:l.header,children:t("button",{onClick:e,children:t(A.ArrowLeft,{size:"24"})})}),u("div",{css:l.body,children:[u("div",{css:l.row,children:[t(z,{text:"배너 이미지 (339 * 114)"}),t("div",{css:l.imageButtonWrap,children:t(N,{imageHeight:80,buttonHeight:38,uploadImage:y,imageIdList:m.length?m:[p.imageId]})})]}),u("div",{css:l.row,children:[t(z,{text:"배너 이름"}),t("input",{onChange:k,css:l.input,placeholder:"배너 이름을 입력해주세요",name:"title",value:p.title})]}),u("div",{css:l.row,children:[t(z,{text:"배너 링크"}),t("div",{css:l.inputWrap,children:t("input",{onChange:k,css:l.input,placeholder:"배너 링크를 입력해주세요",name:"href",value:p.href})})]})]}),t("button",{css:l.button,disabled:!P,onClick:n,children:"배너 등록"}),t(s.Render,{children:t(R,{modal:s,text:"등록이 완료되었습니다."})}),t(c.Render,{children:t(R,{modal:c,text:"저장중 문제가 발생했습니다."})})]})},oe=()=>{const e=E(),g=C("add-banner"),s=C("edit-banner"),[c]=U(),{data:d}=Z({page:c.page??1}),h=()=>g.open(),b=y=>{s.open(y)};return u("section",{css:x.wrap,children:[t(X,{}),u("section",{css:x.tableWrap,children:[u("header",{css:x.header,children:[u("div",{css:x.headerLeftWrap,children:[t("button",{onClick:()=>e("/"),children:t(A.ArrowLeft,{color:a.color.grayScale.gray90,size:"20"})}),t("p",{css:x.headerLeftText,children:"배너 관리"})]}),t("button",{css:x.addText,onClick:h,children:"배너추가"})]}),t(S,{bannerList:d==null?void 0:d.bannerList,onClickOpenEditSidebar:b})]}),t(g.Render,{type:"sidebar",animationType:"slideInRight",withoutOverlay:!0,children:t(j,{onClickClose:g.close})}),t(s.Render,{type:"sidebar",animationType:"slideInRight",withoutOverlay:!0,children:t(j,{onClickClose:s.close,banner:s==null?void 0:s.value})})]})},de=Q(oe);export{de as default};
